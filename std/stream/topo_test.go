package stream

import (
	"testing"

	"github.com/ddkwork/golibrary/std/safemap"
)

func TestTopologicalSort(t *testing.T) {
	m := new(safemap.M[string, []string])
	m.Set("06FB1AF7-647C-4BA4-860A-4533763440F9", nil)
	m.Set("2D988267-CC53-41E3-936A-48CEF9049DF5", nil)
	m.Set("79AB8BD3-03A4-4B65-ABF6-313C10A00CC5", []string{"BB17323A-2460-4AE1-8AFE-B367400B934F"})
	m.Set("809C3AD5-3211-4992-A472-9D81D124C5FA", []string{
		"AFDD7028-1ED9-442E-8A3D-01CFA3AA1CAA",
		"C2D44C60-3F23-4972-8F60-21083B9FB112",
	})
	m.Set("991B8FA7-F75E-4D8A-A0BD-636FE68B6AF4", []string{"809C3AD5-3211-4992-A472-9D81D124C5FA"})
	m.Set("9CA3E213-C43F-4C1D-A6ED-C6FC568D691B", []string{"06FB1AF7-647C-4BA4-860A-4533763440F9"})
	m.Set("AFDD7028-1ED9-442E-8A3D-01CFA3AA1CAA", []string{
		"AFDE69E9-EE3D-470E-8407-C1F0D98F9E3D",
		"BB17323A-2460-4AE1-8AFE-B367400B934F",
	})
	m.Set("AFDE69E9-EE3D-470E-8407-C1F0D98F9E3D", nil)
	m.Set("BB17323A-2460-4AE1-8AFE-B367400B934F", []string{"2D988267-CC53-41E3-936A-48CEF9049DF5"})
	m.Set("C2D44C60-3F23-4972-8F60-21083B9FB112", []string{"9CA3E213-C43F-4C1D-A6ED-C6FC568D691B"})
	m.Set("C3DC85E1-0559-4B58-9792-DE421472DFE9", nil)
	m.Set("FBCBBBAD-4EAE-469E-827F-F59FE9E7375B", []string{
		"2D988267-CC53-41E3-936A-48CEF9049DF5",
		"809C3AD5-3211-4992-A472-9D81D124C5FA",
		"C2D44C60-3F23-4972-8F60-21083B9FB112",
		"C3DC85E1-0559-4B58-9792-DE421472DFE9",
	})

	for _, s := range TopologicalSort(m, true) {
		println(s)
	}
}
